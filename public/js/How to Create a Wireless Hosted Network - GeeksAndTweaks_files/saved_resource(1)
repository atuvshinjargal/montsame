jQuery(function(){SWEETCAPTCHA=new function(){var self=this,captchi,selected1,selected2,path,isAutoSubmit,isTwoAnswers;var _smartphone=navigator.userAgent.match(/mobile/i);this.assign=function(){var li;selected1=false;selected2=false;captchi=jQuery("#captchi");isTwoAnswers=(captchi.find("input[name=scvalue2]").val()!='0');if(_smartphone){captchi.find("li").click(function(){jQuery(this).addClass("selected");self.select(jQuery(this));});}
else{captchi.find("li").draggable({revert:"invalid",containment:captchi,start:function(){if((selected1)&&((selected2)||(!isTwoAnswers))){return false;}
li=jQuery(this);}});captchi.find("span.holder").droppable({activeClass:"active",drop:function(event,ui){self.select(li);}});}
captchi.find(".reset").click(function(){self.reset();});};this.select=function(li){var accept=function(li,targetField,rightOffset){li.animate({opacity:0},"fast",function(){jQuery(this).find("img").css({width:"25px",height:"25px"});jQuery(this).css({position:"absolute",left:"auto",right:rightOffset,top:"-20px"}).animate({top:"10px",opacity:1});});captchi.find("input[name="+targetField+"]").val(li.attr("rel"));}
if(!selected1){selected1=true;accept(li,'scvalue','0px');if((isAutoSubmit)&&(!isTwoAnswers)){jQuery('#verify').submit();}}else{if((isTwoAnswers)&&(!selected2)){selected2=true;accept(li,'scvalue2','30px');if(isAutoSubmit){jQuery('#verify').submit();}}}}
this.reset=function(){selected1=false;selected2=false;jQuery.post(path,{ajax:"resetHtml"},function(html){captchi.replaceWith(html);self.assign();});};this.path=function(p){path=p;};this.isAutoSubmit=function(a){isAutoSubmit=a;};self.assign();};});